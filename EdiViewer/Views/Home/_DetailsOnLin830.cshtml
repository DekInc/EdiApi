@model Tuple<ComModels.LearLin830, IEnumerable<ComModels.EdiSegName>, EdiViewer.Models.EdiDetailModel>
@using ComModels;

<div class="card box-shadow">
    <div class="card-header card-clin cursor" data-toggle="collapse" data-target="#@Model.Item1.HashId" aria-expanded="false" aria-controls="@Model.Item1.HashId" title="@Model.Item2.Where(Sn => Sn.Segment == "LIN").FirstOrDefault().DescEng">
        LIN - @Model.Item2.Where(Sn => Sn.Segment == "LIN").FirstOrDefault().Eng @Model.Item1.ProductId
    </div>
    <div class="collapse" id="@Model.Item1.HashId">
        <div class="card-body">
            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductIdQualifier", Model.Item3.Data.ListCodes)
                            @Html.CodeToStr("LIN.ProductIdQualifier", Model.Item1.ProductIdQualifier, Model.Item3.Data.ListCodes)
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductId", Model.Item3.Data.ListCodes)
                            @Model.Item1.ProductId
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductRefIdQualifier", Model.Item3.Data.ListCodes)
                            @Html.CodeToStr("LIN.ProductRefIdQualifier", Model.Item1.ProductRefIdQualifier, Model.Item3.Data.ListCodes)
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductRefId", Model.Item3.Data.ListCodes)
                            @Model.Item1.ProductRefId
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductPurchaseIdQualifier", Model.Item3.Data.ListCodes)
                            @Html.CodeToStr("LIN.ProductPurchaseIdQualifier", Model.Item1.ProductPurchaseIdQualifier, Model.Item3.Data.ListCodes)
                        </div>
                    </div>
                    <div class="col-sm">
                        <div class="SegmentDataCol">
                            @Html.ShowLabel("Data.LIN.ProductPurchaseId", Model.Item3.Data.ListCodes)
                            @Model.Item1.ProductPurchaseId
                        </div>
                    </div>
                </div>
            </div>
            @if (Model.Item3.Data.ListLinN1.Where(LN1 => LN1.ParentHashId == Model.Item1.HashId).Count() > 0)
            {
                <div class="card box-shadow">
                    <div class="card-header card-cn1 cursor" data-toggle="collapse" data-target="#@Model.Item3.Data.ListLinN1.Where(LN1 => LN1.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" aria-expanded="false" aria-controls="@Model.Item3.Data.ListLinN1.Where(LN1 => LN1.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" title="@Model.Item2.Where(Sn => Sn.Segment == "N1").FirstOrDefault().DescEng">
                        N1 - @Model.Item2.Where(Sn => Sn.Segment == "N1").FirstOrDefault().Eng
                    </div>
                    <div class="collapse" id="@Model.Item3.Data.ListLinN1.Where(LN1 => LN1.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId">
                        <div class="card-body">
                            <div class="container">
                                @foreach (LearN1830 N1 in Model.Item3.Data.ListLinN1.Where(LN1 => LN1.ParentHashId == Model.Item1.HashId))
                                {
                                    @await Html.PartialAsync("_DetailsOnN1830",
                                   new Tuple<LearN1830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                                       N1,
                                       Model.Item2,
                                       Model.Item3.Data.ListCodes))
                                }
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
            }
            @foreach (LearN4830 N4 in Model.Item3.Data.ListLinN4.Where(LN4 => LN4.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnN4830",
               new Tuple<LearN4830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                   N4,
                   Model.Item2,
                   Model.Item3.Data.ListCodes))
                <hr />
            }
            @foreach (LearNte830 Nte in Model.Item3.Data.ListLinNte.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnNte830",
               new Tuple<LearNte830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                   Nte,
                   Model.Item2,
                   Model.Item3.Data.ListCodes))
                <hr />
            }

            @foreach (LearUit830 Uit in Model.Item3.Data.ListLinUit.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnUit830",
               new Tuple<LearUit830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                   Uit,
                   Model.Item2,
                   Model.Item3.Data.ListCodes))
                <hr />
            }
            @foreach (LearPrs830 Prs in Model.Item3.Data.ListLinPrs.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnPrs830",
               new Tuple<LearPrs830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                   Prs,
                   Model.Item2,
                   Model.Item3.Data.ListCodes))
                <hr />
            }
            @foreach (LearSdp830 Sdp in Model.Item3.Data.ListLinSdp.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnSdp830",
               new Tuple<LearSdp830, IEnumerable<EdiSegName>, IEnumerable<LearFst830>, IEnumerable<LearCodes>>(
                   Sdp,
                   Model.Item2,
                   Model.Item3.Data.ListSdpFst.Where(F => F.ParentHashId == Sdp.HashId),
                   Model.Item3.Data.ListCodes))
                <hr />
            }

            @if (Model.Item3.Data.ListLinFst.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).Count() > 0)
            {
                <div class="card box-shadow">
                    <div class="card-header card-cfst cursor" data-toggle="collapse" data-target="#@Model.Item3.Data.ListLinFst.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" aria-expanded="false" aria-controls="@Model.Item3.Data.ListLinFst.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" title="@Model.Item2.Where(Sn => Sn.Segment == "FST").FirstOrDefault().DescEng">
                        FST - @Model.Item2.Where(Sn => Sn.Segment == "FST").FirstOrDefault().Eng
                    </div>
                    <div class="collapse" id="@Model.Item3.Data.ListLinFst.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId">
                        <div class="card-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-sm">
                                        <div class="SegmentDataCol">
                                            @Html.ShowLabel("Data.FST.Quantity", Model.Item3.Data.ListCodes)
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="SegmentDataCol">
                                            @Html.ShowLabel("Data.FST.ForecastQualifier", Model.Item3.Data.ListCodes)
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="SegmentDataCol">
                                            @Html.ShowLabel("Data.FST.ForecastTimingQualifier", Model.Item3.Data.ListCodes)
                                        </div>
                                    </div>
                                    <div class="col-sm">
                                        <div class="SegmentDataCol">
                                            @Html.ShowLabel("Data.FST.FstDate", Model.Item3.Data.ListCodes)
                                        </div>
                                    </div>
                                </div>
                                @foreach (LearFst830 Fst in Model.Item3.Data.ListLinFst.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
                                {
                                    @await Html.PartialAsync("_DetailsOnFst830",
                                            new Tuple<LearFst830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                                                Fst,
                                                Model.Item2,
                                                Model.Item3.Data.ListCodes))
                                }
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
            }
            @if (Model.Item3.Data.ListLinAth.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).Count() > 0)
            {
                <div class="card box-shadow">
                    <div class="card-header card-cath cursor" data-toggle="collapse" data-target="#@Model.Item3.Data.ListLinAth.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" aria-expanded="false" aria-controls="@Model.Item3.Data.ListLinAth.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" title="@Model.Item2.Where(Sn => Sn.Segment == "ATH").FirstOrDefault().DescEng">
                        ATH - @Model.Item2.Where(Sn => Sn.Segment == "ATH").FirstOrDefault().Eng
                    </div>
                    <div class="collapse" id="@Model.Item3.Data.ListLinAth.Where(LNte => LNte.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId">
                        <div class="card-body">
                            @foreach (LearAth830 Ath in Model.Item3.Data.ListLinAth.Where(LNte => LNte.ParentHashId == Model.Item1.HashId))
                            {
                                @await Html.PartialAsync("_DetailsOnAth830",
                                        new Tuple<LearAth830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                                            Ath,
                                            Model.Item2,
                                            Model.Item3.Data.ListCodes))
                            }
                        </div>
                    </div>
                </div>
                <hr />
            }
            @if (Model.Item3.Data.ListLinShp.Where(LShp => LShp.ParentHashId == Model.Item1.HashId).Count() > 0)
            {
                <div class="card box-shadow">
                    <div class="card-header card-cshp cursor" data-toggle="collapse" data-target="#@Model.Item3.Data.ListLinShp.Where(LShp => LShp.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" aria-expanded="false" aria-controls="@Model.Item3.Data.ListLinShp.Where(LShp => LShp.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId" title="@Model.Item2.Where(Sn => Sn.Segment == "SHP").FirstOrDefault().DescEng">
                        SHP - @Model.Item2.Where(Sn => Sn.Segment == "SHP").FirstOrDefault().Eng
                    </div>
                    <div class="collapse" id="@Model.Item3.Data.ListLinShp.Where(LShp => LShp.ParentHashId == Model.Item1.HashId).FirstOrDefault().HashId">
                        <div class="card-body">
                            <div class="container">
                                @foreach (LearShp830 Shp in Model.Item3.Data.ListLinShp.Where(LShp => LShp.ParentHashId == Model.Item1.HashId))
                                {
                                    @await Html.PartialAsync("_DetailsOnShp830",
                                            new Tuple<LearShp830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                                                Shp,
                                                Model.Item2,
                                                Model.Item3.Data.ListCodes))
                                    @foreach (LearRef830 Ref in Model.Item3.Data.ListShpRef.Where(R => R.ParentHashId == Shp.HashId))
                                    {
                                        @await Html.PartialAsync("_DetailsOnRef830",
                                       new Tuple<LearRef830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                                           Ref,
                                           Model.Item2,
                                           Model.Item3.Data.ListCodes))
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
            }
            @foreach (LearRef830 Ref in Model.Item3.Data.ListLinRef.Where(LRef => LRef.ParentHashId == Model.Item1.HashId))
            {
                @await Html.PartialAsync("_DetailsOnRef830",
               new Tuple<LearRef830, IEnumerable<EdiSegName>, IEnumerable<LearCodes>>(
                   Ref,
                   Model.Item2,
                   Model.Item3.Data.ListCodes))
                <hr />
            }
        </div>
    </div>
</div>
