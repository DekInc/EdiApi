<div class="modal fade2" id="modalPopNewDis" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content modal-content-normal">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"></h5>                
            </div>
            <div class="modal-body">
                <div id="divMensajePop1">
                    <p>Por favor confirme los productos del pedido y la fecha del mismo</p>
                    <p>
                        <label class="label" for="dtp2">Fecha y hora de envió</label><br />
                        <input class="form-control datepicker" data-link-format="dd/mm/yyyy hh:ii" id="dtp2" maxlength="19" />
                    </p>
                    <div class="container" id="divList">
                        <table id="tblPedidos" class="table table-striped table-bordered nowrap table-hover display" cellspacing="0" role="grid">
                            <thead>
                                <tr>
                                    <th>CodProducto</th>
                                    <th>Producto</th>
                                    <th>Cantidad a pedir</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="container">
                    <div class="row">
                        <div class="col colPopButton">
                            <button type="button" class="btn btn-secondary" id="btnSaveDis">Guardar pedido</button>
                        </div>
                        <div class="col colPopButton">
                            <button type="button" class="btn btn-success" id="btnSendDis">Enviar pedido</button>
                        </div>
                        <div class="col colPopButton">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var domtblPedidos = null;
    $('#btnSaveDis').on('click', function () {
        $.ajax({
            method: "POST",
            url: "@this.Url.Action("SetPedidoExterno")",
            data: arrayProductos
        });
        console.log(1213);
    });
    function onInit() {
        var contentListProd = '';

        domtblPedidos = $("#tblPedidos").DataTable({
            select: true,
            responsive: window.mobileAndTabletcheck(),
            destroy: true,
            info: false,
            "scrollX": true,
            "processing": true, // for show progress bar
            "serverSide": false, // for process server side
            "filter": false, // this is for disable filter (search box)
            "orderMulti": false, // for disable multiple column at once
            "lengthMenu": [[25, 35, 50, 60], [25, 35, 50, 60]],
            "language":
            {
                "processing": "<div class='divAjax'>Obteniendo datos<br /><img style='width:50px; height:50px;' src='/images/ajax.gif' /></div>",
                "decimal": ".",
                "thousands": ",",
                "emptyTable": "No hay información"
            },
            data: arrayProductos.filter(P => P.cantPedir != 0),
            "order": [[0, "asc"]],
            "columns": [                
                { "data": "codProducto", "name": "Cod Producto", "autoWidth": true, "defaultContent": "" },
                { "data": "producto", "name": "Producto", "autoWidth": true, "defaultContent": "" },
                { "data": "cantPedir", "name": "Cant pedir", "autoWidth": true, "defaultContent": "" }
            ]
        });



        //$('#divList').html('');
        //for (var i = 0; i < arrayProductos.length; i++) {
        //    if (arrayProductos[i].cantPedir !== 0) {
        //        contentListProd += '<div class="row"><div class="col">' + arrayProductos[i].codProducto.replace(/º/g, ' ') + '</div><div class="col">' + arrayProductos[i].producto + '</div><div class="col">' + arrayProductos[i].cantPedir + '</div></div>';                
        //    }
        //}
        //$('#divList').html($('#divList').html() + contentListProd + '<br />');
        //if ($('#divList').html() == '')
        //    $('#divList').html('No hay productos seleccionados');
        $('#dtp2').datetimepicker({ format: 'dd/mm/yyyy hh:ii' });
    }    
</script>